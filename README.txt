実行にはsbclとquicklispが必要です。
sbcl --load load.lisp
で起動します。
JSONの生成にjonathanを使用しています

・勝敗の決定
100階のボスを倒したら勝利です。

・AIの作り方

AIプログラムとサーバは標準入出力でやりとりをします。
AIプログラムは最初に名前を出力します。
以降はJSONデータを受け取り、アクションの出力を繰り返します。

・出来上がったAIを実際にゲームサーバで動かすには

ai.txtに実行コマンドを記入すればゲームサーバ上で動きます。


・AIに送られてくるJSONデータ

・マップ移動モード

地下1階  Lv 1, HP 30/30 力 30/30 素早さ 30/30 

ロロロロロロロロロロロ 武器[i]   なし
ロ主　　ロ下　　　　ロ 回復薬    2個
ロロロ　ロロロロロ　ロ ハンマー  5個
ロ宝ロ　ロ　　　ロ　ロ Exp       0/100
ロ　ロ　ロ　ロ　ロ　ロ
ロ　ロ　　　ロ　ロ　ロ
ロ　ロロロロロ　ロ　ロ 薬を使う[q]
ロ　　　　宝ロ　　　ロ 武器合成[g]
ロ　ロロロロロロロ　ロ ヘルプ[h]
ロ　　　　　　　　　ロ 終わる[r]
ロロロロロロロロロロロ

上記のデータをJSON化すると以下になります。
{"map":1,"player":{"hp":30,"maxhp":30,"str":30,"maxstr":30,"agi":30,"maxagi":30,"level":1,"exp":0,"heal":2,"hammer":5,"map-level":1,"buki":["なし",0,0,0],"pos":{"x":1,"y":1}},"blocks":[[8,8],[8,7],[8,6],[8,5],[8,4],[8,3],[8,2],[7,6],[6,8],[6,6],[6,5],[6,4],[6,3],[6,2],[5,8],[5,6],[5,2],[4,8],[4,6],[4,4],[4,2],[3,8],[3,4],[3,2],[2,8],[2,7],[2,6],[2,5],[2,4],[2,2],[2,1],[1,4]],"walls":[[10,10],[10,9],[10,8],[10,7],[10,6],[10,5],[10,4],[10,3],[10,2],[10,1],[10,0],[9,10],[9,0],[8,10],[8,0],[7,10],[7,0],[6,10],[6,0],[5,10],[5,0],[4,10],[4,0],[3,10],[3,0],[2,10],[2,0],[1,10],[1,0],[0,10],[0,9],[0,8],[0,7],[0,6],[0,5],[0,4],[0,3],[0,2],[0,1],[0,0]],"items":[[7,5],[3,1]],"boss":[],"kaidan":[[1,5]],"events":[],"ha2":[]}

walls  壊せない壁
blocks ハンマーを持ってると壊せる壁
items  宝箱の座標
boss   ボスの座標
ha2    中ボスの座標
kaidan 階段の座標
events イベントの座標
要素はそれぞれの位置の(x座標 y座標)です。

playerについて
{"hp":30,"maxhp":30,"str":30,"maxstr":30,"agi":30,"maxagi":30,"level":1,"exp":0,"heal":2,"hammer":5,"map-level":1,"buki":["なし",0,0,0],"pos":{"x":1,"y":1}}

hp        現在のHP
maxhp     最大HP
str       現在のstr(攻撃力)
maxstr    最大str
agi       現在のagi(素早さ)
maxagi    最大agi
level     レヴェル
exp       取得経験値
pos       プレイヤー位置
heal      回復薬の数
hammer    ハンマーの数
map-level 現在いる階
buki      装備してる武器("名前" 攻撃力　HP 素早さ)

・バトルモード時に送られるJSONデータ
{"battle":1,"monsters":[{"name":"スライム","number":4,"level":1,"hp":8},{"name":"スライム","number":3,"level":6,"hp":7},{"name":"オーク","number":2,"level":5,"hp":10},{"name":"ヒドラ","number":1,"level":6,"hp":6},{"name":"ヒドラ","number":0,"level":2,"hp":2}],"player":{"hp":30,"maxhp":30,"str":30,"maxstr":30,"agi":30,"maxagi":30,"level":1,"exp":0,"heal":2,"hammer":5,"map-level":1,"buki":["なし",0,0,0],"pos":{"x":0,"y":0}}}

monstersについて
:[{"name":"スライム","number":4,"level":1,"hp":8},{"name":"スライム","number":3,"level":6,"hp":7},{"name":"オーク","number":2,"level":5,"hp":10},{"name":"ヒドラ","number":1,"level":6,"hp":6},{"name":"ヒドラ","number":0,"level":2,"hp":2}]

name   名前
number モンスター番号 (敵を指定するときに使う)
level  モンスターのレベル
hp     モンスターのHP

・装備モード時に送られるJSONデータ
{"equip":1,"now":{"name":"なし","str":0,"hp":0,"agi":0},"discover":{"name":"もげぞーの剣","str":1,"hp":0,"agi":0}}

now       現在装備してる武器
desicover 発見した武器
str       攻撃力
hp        HP
agi       agi

・レベルアップモード時に送られるJSONデータ
{"levelup":1,"player":{"hp":30,"maxhp":30,"str":30,"maxstr":30,"agi":30,"maxagi":30,"level":1,"exp":0,"heal":2,"hammer":5,"map-level":1,"buki":["なし",0,0,0],"pos":{"x":0,"y":0}}}



・入出力データの詳細

4つのモードがありそれぞれAIが主力するアクションは異なります。

1,
マップ移動モードのときのAIが出力するアクションは "移動方向" or "HEAL" という文字列です。
移動方向は "UP" "DOWN" "RIGHT" "LEFT"のいずれかです。
サンプル
println "UP"; //上に移動
println "HEAL"; // 回復薬を使う

2,
バトルモードのときのAIが出力するアクションは
"STAB n"     敵を一体指定
"DOUBLE n n" 敵を２体指定
"SWING"      敵指定なし
"HEAL"
のいずれかです
(nはモンスター番号)
(STAB,DOUBLEには半角スペース大事)

3,
装備モードのときのAIが出力するアクションは
"YES" 装備する
"NO"  装備しない(捨てる)
のいずれかです

4,
レベルアップもーどのときにAIが出力するアクションは
"HP" "STR" "AGI"
のいずれかです。
増やしたいステータスを出力してください
